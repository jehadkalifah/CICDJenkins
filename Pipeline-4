//Pipeline using Dockefile
pipeline {
    agent {
        dockerfile {
            // it will build a docker image from dockerfile
            filename 'Dockerfile'
       // directory name, in case Dockerfile existed in a different directory/path    
	   // dir 'build'
	    label 'dockeragent'
	   // args '-v /tmp:/tmp'
        }
    }
    stages {
        stage('Build') {
            steps {
                // defining the environment variable HOME
                // so shell commands will be executed under HOME directory
                // where you don't want use WORKDIR temporary
            	withEnv(["HOME=${env.WORKSPACE}"]) {
                    sh 'ls -l'
                    sh 'python -V'
                    sh 'pip install -r ./reqts.txt'
                }	
            }
        }
    }
}
